<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editor d'horari — sessions.json</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/admin.css" />
</head>
<body>
  <!-- Soft access gate -->
  <div class="gate-overlay" id="gate" style="position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:99999;">
    <div style="background:#fff;border-radius:14px;box-shadow:0 18px 50px rgba(0,0,0,.25);width:min(92vw,420px);padding:18px">
      <div style="font-size:.9rem;color:#666;margin-bottom:6px;letter-spacing:.08em">ACCÉS RESTRINGIT</div>
      <h2 style="margin:0 0 8px 0">Clau d'accés</h2>
      <p class="muted" style="margin:0 0 10px 0">Introdueix la clau per editar l'horari.</p>
      <input id="gateInput" type="password" placeholder="••••••••" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;margin-bottom:10px">
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="gateCancel" class="btn">Cancel·la</button>
        <button id="gateOK" class="btn primary">Entra</button>
      </div>
      <div id="gateMsg" style="color:#b00020;margin-top:8px;display:none">Clau incorrecta</div>
    </div>
  </div>

  <h1>Editor de sessions</h1>
  <!-- <p class="muted small">Mantén <code>classes.json</code> i <code>teachers.json</code> com a llista mestra de grups/professors.</p> -->

  <div class="bar">
    <div class="dropdown" id="actionsDropdown">
      <button class="dropdown-toggle">Accions ▾</button>
      <div class="dropdown-menu">
        <button class="btn" id="loadServerBtn">Carrega del servidor</button>
        <hr/>
        <label class="btn">Importa <code>sessions.json</code>
          <input id="fileInput" type="file" accept=".json" style="display:none">
        </label>
        <hr/>
        <button class="btn" id="addRowBtn">Afegeix sessió</button>
        <button class="btn" id="validateBtn">Comprova solapaments</button>
        <button class="btn" id="exportBtn">Descarrega sessions.json</button>
      </div>
    </div>
    <!--
    <button class="btn" id="loadServerBtn">Carrega del servidor</button>
     <label class="btn">
      Importa <code>sessions.json</code>
      <input id="fileInput" type="file" accept=".json" style="display:none">
    </label>
    <button class="btn" id="addRowBtn">Afegeix sessió</button>
    <button class="btn" id="exportBtn">Descarrega sessions.json</button>
    <button class="btn" id="validateBtn">Comprova solapaments</button> -->
    <span id="status" class="pill muted"></span>
    <a href="index.html" class="btn right">↩ Torna a la vista</a>
  </div>

  <div class="controls">
    <label>Mode hora:</label>
    <select id="timeMode"><option value="time">Hores HH:MM</option><option value="slots">Franges</option></select>
    <label>Filtra:</label>
    <select id="filterMode">
      <option value="all">Totes</option>
      <option value="class">Per classe</option>
      <option value="teacher">Per professor</option>
    </select>
    <select id="filterSelect"></select>
    <button class="btn" id="clearFilter">Neteja filtre</button>
    <span class="pill muted">Files: <span id="rowCount">0</span></span>
    <span class="pill muted">Avisos: <span id="warnCount">0</span></span>
  </div>

  <div class="table-wrap">
    <table id="table">
      <thead>
        <tr>
          <th>Dia</th>
          <th>Inici</th>
          <th>Fi</th>
          <th>Assignatura</th>
          <th>Classe</th>
          <th>Professor/a</th>
          <th>Aula</th>
          <th class="nowrap">Accions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div id="report" class="footer"></div>

  <script src="js/admin.js"></script>
  <script src="js/timepicker.js"></script>
  <script src="js/admin2.js"></script>


</body>
</html>
